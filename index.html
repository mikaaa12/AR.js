<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>AR.js GPS Demo</title>
    <!-- A-Frame Library -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <!-- AR.js for A-Frame -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene 
        vr-mode-ui="enabled: false" 
        embedded
        arjs="sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: true;">
        <!-- Kamera dengan dukungan GPS -->
        <a-camera gps-camera rotation-reader></a-camera>
        <!-- Objek 3D -->
        <a-box
            id="ar-box"
            gps-entity-place="latitude: 0; longitude: 0;"
            scale="5 5 5"
            material="color: blue;">
        </a-box>
    </a-scene>

    <script>
      // Event listener untuk mendeteksi pembaruan posisi GPS perangkat
      document.querySelector('[gps-camera]').addEventListener('gps-camera-update-position', (event) => {
          const entity = document.getElementById('ar-box');
          const { latitude, longitude } = event.detail.position;
          
          // Set latitude dan longitude objek 3D ke posisi perangkat
          entity.setAttribute('gps-entity-place', `latitude: ${latitude}; longitude: ${longitude};`);
          
          // Buat objek terlihat
          entity.setAttribute('visible', 'true');

          // Log untuk memastikan koordinat disetel dengan benar
          console.log(`Object placed at device location: latitude: ${latitude}, longitude: ${longitude}`);
      });
    </script>
</body>
</html>
